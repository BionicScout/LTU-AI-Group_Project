<!DOCTYPE html>

<html lang="en">
    <head>
        <!-- Basic HTML Set Up -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sudoku Solver</title>
    </head>

    <body>

    </body>

    <script>
        //---------------- Fetching Solve Solution --------------------
        function solve(){
            fetch('http://localhost:8080/solve', {
                method: 'POST'
            })
            .then(response => {
                // Parse the JSON response
                return response.json();
            })
            .then(data => {
                print(data)
                info = JSON.parse(data);

                console.log(info);

                updatesQueue = solve_parseUpdate(info);
                console.log(updatesQueue);

                board = solve_parseBoard(info);
                console.log(board);
                
                addedVals = solve_parseAddedVals(info);
                console.log(addedVals);
            })
            .catch(error => console.error('Error: ', error));
        }


        function solve_parseUpdate(info){
            // Initialize a queue to store updates
            const updatesQueue = [];
        
            // Iterate over each update in the data
            info.updates.forEach(update => {
                // Extract relevant information from the update
                const solveType = update.solve_type;
                const eliminations = update.eliminations;
                const foundValue = update.found_value;
                const group = update.group;
        
                // Create an object to represent the update
                const updateInfo = {
                    solveType: solveType,
                    eliminations: eliminations,
                    foundValue: foundValue,
                    group: group
                };
        
                // Add the update to the queue
                updatesQueue.push(updateInfo);
            });
        
            // Now updatesQueue contains all updates split into individual objects
            return updatesQueue
        }

        function solve_parseBoard(info){
            // Initialize a queue to store updates
            const board = [];
        
            // Iterate over each update in the data
            info.board.forEach(rowInfo => {
                const row = [];

                rowInfo.forEach(val => {
                    row.push(val);
                })

                // Add the update to the queue
                board.push(row);
            });
        
            // Now updatesQueue contains all updates split into individual objects
            return board
        }

        function solve_parseAddedVals(info){
            // Initialize a queue to store updates
            const addedVals = [];
            
            // Iterate over each update in the data
            info.added.forEach(valSet => {
                // Extract relevant information from the update
                const val = valSet.val;
                const coord = valSet.coord;
   
        
                // Create an object to represent the update
                const parsedVal = {
                    val: val,
                    coord: coord
                };
        
                // Add the update to the queue
                addedVals.push(parsedVal);
            });
        
            // Now updatesQueue contains all updates split into individual objects
            return addedVals
        }
    </script>
</html>