<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sample App</title>
    </head>
    <body>
        <h1>Data Table</h1>
        {% for table in tables %}
            {{ table|safe }}
        {% endfor %}
    </body>

    <script>
        fetch('http://localhost:8080/solve', {
            method: 'POST'
        })
        .then(response => {
            // Parse the JSON response
            return response.json();
        })
        .then(data => {
            info = JSON.parse(data);

            // Check if data exists and if it contains updates
            if (data && Array.isArray(info.updates)) {
                // Initialize a queue to store updates
                const updatesQueue = [];
            
                // Iterate over each update in the data
                info.updates.forEach(update => {
                    // Extract relevant information from the update
                    const solveType = update.solve_type;
                    const eliminations = update.eliminations;
                    const foundValue = update.found_value;
                    const group = update.group;
            
                    // Create an object to represent the update
                    const updateInfo = {
                        solveType: solveType,
                        eliminations: eliminations,
                        foundValue: foundValue,
                        group: group
                    };
            
                    // Add the update to the queue
                    updatesQueue.push(updateInfo);
                });
            
                // Now updatesQueue contains all updates split into individual objects
                console.log(updatesQueue);
            } else {
                console.log('Invalid data received from backend');
            }
        })
        .catch(error => console.error('Error: ', error));

        fetch('http://localhost:8080/load', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json' // Specify the content type as JSON
            },
            body: JSON.stringify({ fileName: 'Puzzle_1.txt' }) // Send the file name in the request body
        })
        .then(response => {
            // Check if the response is ok
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            // Parse the JSON response
            return response.json();
        })
        .then(data => {
            // Parse the JSON data if necessary (depending on the response from the backend)
            console.log(data);
        })
        .catch(error => console.error('Error: ', error));

    </script>
    

</html>